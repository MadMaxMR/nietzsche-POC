# nietzsche-POC


/*HTML*/
<div style="margin-left: 20px;margin-top: 20px;">
  <span></span> to <span></span>
</div>
/*CSS*/
.tick{
  visibility:hidden;
}

 .domain {
    stroke: black;
    stroke-width:10px;
    stroke-linecap: round;
  }

.selection{
    fill:red;
}

.handle{
  width:6px;
  height:20px;
  margin-top:0px;
}

/*JS*/
var margin = 20,
  width = 400 - margin * 2,
  height = 15;

// v3 = var x = d3.scale.linear()
var x = d3.scaleLinear().domain([0, 100]).range([0, width]);


    /*var brush = d3.svg.brush()
      .x(x)
      .extent([20, 50]);*/
    
var brush = d3
  .brushX()
  .extent([
    [0, 0],
    [width, height]
  ])
  .on("start brush end", brushed);

var svg = d3
  .select("body")
  .append("svg")
  .attr("width", width + margin * 2)
  .attr("height", 100)
  .append("g")
  .attr("transform", "translate(" + margin + "," + margin + ")")
  .call(d3.axisBottom().scale(x).tickSize(0));

var brushg = svg.append("g").attr("class", "brush").call(brush);


// left circle

var left_text = brushg
  .append("text")
  .attr("class", "label")
  .attr("fill", "black")
  .attr("text-anchor", "middle")
  .text("hello world")
  .attr("transform", "translate(0," + 35 + ")");

var right_text = brushg
  .append("text")
  .attr("class", "label")
  .attr("fill", "black")
  .attr("text-anchor", "middle")
  .text("hello world")
  .attr("transform", "translate(0," + 35 + ")");

/*custom*/
var brushResizePath = d3.arc()
                        .innerRadius(0)
                        .outerRadius(10)
                        .startAngle(0)
                        .endAngle((d, i) => i ? Math.PI : -Math.PI)

var handle = brushg.selectAll(".handle--custom")
    .data([{type: "w"}, {type: "e"}])
    .enter().append("path")
    .attr("class", "handle--custom")
    .attr("stroke", "#000")
    .attr("fill", '#eee')
    .attr("cursor", "pointer")
    .attr("d", brushResizePath);
/* 
      Height of the brush's rect is now 
        generated by brush.extent():
    brushg.selectAll("rect")
        .attr("height", height);
    */

function brushed() {
  var range = d3
          .brushSelection(this)
          .map(x.invert);

  console.log("range->" + range);
  d3.selectAll("span").text(function (d, i) {
    console.log(Math.round(range[i]));
    return Math.round(range[i]);
  });

  left_text.attr("x", x(range[0]));
  left_text.text(Math.round(range[0]));
  right_text.attr("x", x(range[1]));
  right_text.text(Math.round(range[1]));

  d3.selectAll("rect").attr("dy", "-5em");
  handle.attr("display", null)
        .attr("transform",function(d, i){ 
          return "translate(" + [ range[i]+50,10] + ")";})
}


brush.move(brushg, [20, 40].map(x));
